<?xml version="1.0"?>
<!--
###########################################################################
#  
# Author      : Awen zhu
# CreateDate  : 2012-6-21
# Description : Global config file
# ChangeHist  : 2012-6-21 Init checkin.
#
# Depedencies : 
#               
#				
#				
###########################################################################
-->
<EDWEBS>
  <Cluster>
	<Master 
		Server="chexbldedw001"
		BobHome="d:\Bob"
		IMAPAccount="edwdeploy" 
		ServiceAccount="s-edwdeploy" 
		HeartBeatFile="../tmp/HeartBeatFile.trigger"
		Partten="^(\[|FW:\[)BLD_REQ\]:(.*?)env=(mln|rc|ppe)"
	/>
	<Slave 
		Server="esfvmvi-003" 
		BobHome="d:\Bob"
		Enable="Yes" 
		IMAPAccount="edwdeploy" 
		ServiceAccount="s-edwdeploy" 
		HeartBeatFile="../tmp/HeartBeatFile.trigger"
		Partten="^(\s*\[|FW:\[)BLD_REQ\]:(.*?)env=(DEV|TEST)"
	/>
  </Cluster>
  <Bundle>
   <RootDir dir="D:\Raids"/>
   <TmpDir dir=""/>
   <LogDir dir=""/>
   <CygHome dir="c:\\cygwin"/>
   <LogFile>../log/Boblog_yyyymmdd.txt</LogFile>
   <CntlFile>../conf/CntlFile.pcf</CntlFile>
   <MaxItem>5</MaxItem>
   <LongRunningWaitTime>480</LongRunningWaitTime>
   <SleepTime>15</SleepTime>
   <MaxkeepDays>700</MaxkeepDays>
   <DevMode isEnabled="No"/>
  </Bundle>
  <TimeWindow>
    <WeekDays>0,1,2,3,4,5,6</WeekDays>
    <StartAt>0001</StartAt>
    <EndAt>2359</EndAt>
  </TimeWindow>
  <BobLog>
    <Archive>
	  <Src>../log</Src>
	  <Tgt>../log/archive</Tgt>
	  <MaxArchiveDays>7</MaxArchiveDays>
	</Archive>
  </BobLog>
  <JiraConnString>
	<Server>CHEXSQLEDW04</Server>
	<Database>EDWDE</Database>
	<DBUser></DBUser>
	<DBPass></DBPass>
	<URL>http://jira</URL>
	<UserName>svc.edw.queryservice</UserName>
	<Password>changeme</Password>
  </JiraConnString>
  <Alert>
	<Reciever>v-azhu@expedia.com;nvangala@expedia.com;qarnold@expedia.com;a-vlakshmi@expedia.com;v-xiaowli@expedia.com;nsandle@expedia.com;gdcodwsa@expedia.com</Reciever>
  </Alert>
  <IMAP>
	<Server>DBCXEXCHCAS001.SEA.CORP.EXPECN.COM</Server>
	<UserName>sea\\edwdeploy</UserName>
	<Password></Password>
	<Folder>Inbox</Folder>
	<MoveTo>BuildReq</MoveTo>
  </IMAP>
  <SMTP>
    <Server>dnsmtp.expeso.com</Server>
	<Sender>edwbld@expedia.com</Sender>
	<TimeOut>300</TimeOut>
  </SMTP>
  <PermissionMap>
	<User ENV="DEV|TEST|RC|MLN">EDW E2E Deploy</User>
	<User ENV="DEV|TEST">EDW LAB Deploy</User>
	<User ENV="RC|MLN">a-vlakshmi</User>
  </PermissionMap>
  <BuildAccountMap>
	<DEV  envName="dev"
          repository="http://cheledwhdc901/edw"
          Infa_Domain="Domain_Development"
          BOUser="v-azhu"
		  BOPass="YgVNsbZ6Ve0=" 
		  DB2User="edwdbldr" 
		  DB2Pass="nnUtcCVj81IZ7TeykQQijA==" 
		  InfaUser="v-azhu" 
		  InfaPass="7uQISBlgp/M="
		  CTM_User="v-azhu"
		  CTM_Pass="7uQISBlgp/M="/> 
	<TEST envName="test"
          repository="http://cheledwhdc901/edw"
          Infa_Domain="Domain_Test"
          BOUser="v-azhu" 
	      BOPass="YgVNsbZ6Ve0=" 
		  DB2User="edwtbldr" 
		  DB2Pass="qrLVqcfkok0Ss3dg0cU8Og=="
		  InfaUser="v-azhu" 
		  InfaPass="y5hjPYjUWfgiRs8dSl5ssQ=="
		  CTM_User="v-azhu"
		  CTM_Pass="mnbzVB/ls67tf0hVnOpcsw=="/> 
	<PPE  envName="ppe"
          repository="http://cheledwhdc901/edw"
          BOUser="v-azhu" 
	      BOPass="LkwCezgBlv87wtHhkGxgSA==" 
		  DB2User="edwuldr" 
		  DB2Pass="NecrmjVScxgbIdWd3agamQ==" 
		  InfaUser="v-azhu" 
		  InfaPass="2AUm0Vsiih4w2z44jqdeEg=="
		  CTM_User="v-azhu"
		  CTM_Pass="mnbzVB/ls67tf0hVnOpcsw=="/> 
	<RC   envName="maui"
          repository="http://cheledwhdc901/edw"
          Infa_Domain="Domain_Release"
          BOUser="v-azhu" 
	      BOPass="YgVNsbZ6Ve0=" 
		  DB2User="edwrbldr" 
		  DB2Pass="lpjju4wJ/qc=" 
		  InfaUser="v-azhu" 
		  InfaPass="7uQISBlgp/M="
		  CTM_User="v-azhu"
		  CTM_Pass="mnbzVB/ls67tf0hVnOpcsw=="/> 
	<MLN  envName="milan"
          repository="http://cheledwhdc901/edw"
          Infa_Domain="Domain_ReleaseMilan"
          BOUser="v-azhu" 
	      BOPass="YgVNsbZ6Ve0=" 
		  DB2User="edwrbldr" 
		  DB2Pass="lpjju4wJ/qc=" 
		  InfaUser="v-azhu" 
		  InfaPass="7uQISBlgp/M="
		  CTM_User="v-azhu"
		  CTM_Pass="mnbzVB/ls67tf0hVnOpcsw=="/>
	<PROD envName="prod"
          repository="http://chsxedwhdu001/edw"
          Infa_Domain="Domain_Production"
          BOUser="v-azhu" 
	      BOPass="YgVNsbZ6Ve0=" 
		  DB2User="edwrbldr" 
		  DB2Pass="lpjju4wJ/qc=" 
		  InfaUser="v-azhu" 
		  InfaPass="7uQISBlgp/M="
		  CTM_User="v-azhu"
		  CTM_Pass="mnbzVB/ls67tf0hVnOpcsw=="/>          
  </BuildAccountMap>
  <CmdSyntaxPattern>
    <CmdPattern name="tdeploy" scope="DEV|TEST|RC|MLN|PPE|PROD" Comment="Teradata deployment wrapper">^bash tdeploy.sh</CmdPattern>
    <CmdPattern name="ssh_cmd" scope="DEV|TEST" Comment="Hadoop deployment wrapper">^bash ssh_cmd.sh</CmdPattern>
    <CmdPattern name="scp_cmd" scope="DEV|TEST" Comment="security copy">^bash ssh_scp.sh</CmdPattern>
    <CmdPattern name="echo" scope="DEV|TEST" Comment="security copy">^echo</CmdPattern>
  </CmdSyntaxPattern>
  <ErrorCodes>
    <ErrorCode code="EDWEBS-00000">Well Done!</ErrorCode>
    <ErrorCode code="EDWEBS-00001">Error out, Not passed validation,error occured during deployment etc.,</ErrorCode>
    <ErrorCode code="EDWEBS-00100">Invalid Raid number or no such raid.txt in p4.</ErrorCode>
    <ErrorCode code="EDWEBS-00101">One more raids invalid</ErrorCode>
    <ErrorCode code="EDWEBS-00102">EDW Raids and DMO raids can not put together as a bundle.</ErrorCode>
    <ErrorCode code="EDWEBS-00103">Bundle Name should be specified for mulit-raids deployment</ErrorCode>
    <ErrorCode code="EDWEBS-00104">ENV must be MLN if you wanna stage a bundle for prod.</ErrorCode>
    <ErrorCode code="EDWEBS-00105">Too many raids included. make sure raid count less than 20 each time.</ErrorCode>
    <ErrorCode code="EDWEBS-00106">Invalid ENV, The ENV must be one of "DEV,TEST,RC,MLN,PPE,PROD"</ErrorCode>
    <ErrorCode code="EDWEBS-00107">Only accepts request sent via expedia email,Please contact with Awen Zhu when you get this message.</ErrorCode>    
    <ErrorCode code="EDWEBS-00200">Failed to create bundle</ErrorCode>
    <ErrorCode code="EDWEBS-00300">CodeReview not done on non-DEV Envs</ErrorCode>
    <ErrorCode code="EDWEBS-00400">No permission to deploy jira to this ENV,Make sure you are member of DW LAB Deploy, 
                                 You will be able to deploy jira on DEV/TEST Automatically. For other envs, please contact with EDW Build Team. </ErrorCode>
    <ErrorCode code="EDWEBS-00401">No permission to apply action on this ENV</ErrorCode>
    <ErrorCode code="EDWEBS-00402">The ENV must be given to apply action.</ErrorCode>
    <ErrorCode code="EDWEBS-00403">Bad parameter,Not supported action.</ErrorCode>
    <ErrorCode code="EDWEBS-00500">Incorrect request format</ErrorCode>
    <ErrorCode code="EDWEBS-00501">InfaUser/InfaPass are reqiered for DEV Env since Raid includes Infa code.</ErrorCode>
    <ErrorCode code="EDWEBS-00502">Integrate must be specified for RC deployment</ErrorCode>
    <ErrorCode code="EDWEBS-00600">Cannt connect to database</ErrorCode>
    <ErrorCode code="EDWEBS-00700">Cannt connect to IMAP server</ErrorCode>
    <ErrorCode code="EDWEBS-00800">Failed to send email</ErrorCode>
    <ErrorCode code="EDWEBS-00900">A error occured during deployment</ErrorCode>
    <ErrorCode code="EDWEBS-00910">A error occured during stage</ErrorCode>
    <ErrorCode code="EDWEBS-00920">A error occured during integration</ErrorCode>
    <ErrorCode code="EDWEBS-10000">Build request responsion</ErrorCode>
    <ErrorCode code="EDWEBS-10100">Unaccepted command or Syntax error,click help here for more information</ErrorCode>
    <ErrorCode code="EDWEBS-10101">Command not allowed for this ENV</ErrorCode>
    <ErrorCode code="EDWEBS-99999">Unknow error</ErrorCode>
  </ErrorCodes>
  <Messages>
    <msg code="EDWEBS-00000" type="html">
		<![CDATA[<body>
<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks for contacting EDW Build Team!!! Your request has been performed. Here are details:</font>
<br><br>
<table border="1" width="100%" bordercolorlight="#000000" cellspacing="1" bordercolordark="#000000" style="border-collapse: collapse">
	<tr>
		<td colspan="2" bgcolor="#C0C0C0">
		<p align="center"><b><font face="Verdana" size="5">Deployment status</font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Raid(s)</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2"><--Raids--></font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">ENV</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2"><--ENV--></font></b></td>
	</tr>
	<tr>
		<td width="12%" height="23" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Status</font></b></td>
		<td width="87%" height="23"><b><font face="Verdana" color="red" size="2"><b><--BuildStatus--></b></font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Logs</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2">
        <a href="file://<--computename-->/raids/<--BundleFolder-->/BusinessSystems/Common/DBBuild/db/release/ApplyBundledHotfixes_LOG">ClickHereViewLogs(File Link)</a><br>
        <a href="https://esfvmvi-003:8123/<--computename-->/<--BundleFolder-->/BusinessSystems/Common/DBBuild/db/release/ApplyBundledHotfixes_LOG">ClickHereViewLogs(HTTP Link)</a>
        </font></b>
        </td>
	</tr>
    <tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Usage</font></b></td>
		<td width="87%">
			<a href="https://confluence/display/EDWDev/Usage+of+automated+deployment+tool"><b><font face="Verdana" size="2">ClickHereViewUsage</font></b></a>
		</td>
	</tr>  
	<!--LongRunningTasks-->
</table>
<br><br>
<!--Stage-->
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
</body>]]>
	</msg>
    <msg code="EDWEBS-00001" type="html">
		<![CDATA[<body>
<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks for contacting EDW Build Team!!! Your request has been performed. Here are details:</font>
<br><br>
<table border="1" width="100%" bordercolorlight="#000000" cellspacing="1" bordercolordark="#000000" style="border-collapse: collapse">
	<tr>
		<td colspan="2" bgcolor="#C0C0C0">
		<p align="center"><b><font face="Verdana" color="red" size="5">ERROR</font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Raid(s)</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2"><--Raids--></font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">ENV</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2"><--ENV--></font></b></td>
	</tr>
	<tr>
		<td width="12%" height="23" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">ErrorCode</font></b></td>
		<td width="87%" height="23"><b><font face="Verdana" size="2"><--ErrorCode--></font></b></td>
	</tr>
	<tr>
		<td width="12%" height="23" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Description</font></b></td>
		<td width="87%" height="23"><b><font face="Verdana" color="red" size="2"><--Action--> 
        <!--RemoveComments
        &lt;a href="https://esfvmvi-003:8123/&lt;--computename--&gt;/StageLogs/CBundle&lt;--BundleFolder--&gt;.txt"&gt;ClickHereViewLogs&lt;/a&gt; 
        RemoveComments-->
        </font></b></td>
	</tr>
</table>
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
</body>
]]>
	</msg>	
    <msg code="EDWEBS-00002" type="html">
		<![CDATA[<body>
<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks for contact EDW Build Team, Your request has been performed, Here are details:</font>
<br><br>
<!--Stage-->
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
</body>]]>
	</msg>
    <msg code="EDWEBS-00003" type="html">
		<![CDATA[<body>
		<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
		<br><br>
		<font face="Tahoma" size="2" Color="#000079">Thanks for contact EDW Build Team, Your request has been performed, Here are details:</font>
		<br><br>
		<table border="1" width="100%" bordercolorlight="#000000" cellspacing="1" bordercolordark="#000000" style="border-collapse: collapse">
			<tr>
				<td colspan="6" bgcolor="#C0C0C0">
				<p align="center"><b><font face="Verdana" size="5">Request Lists</font></b></td>
			</tr>
			<tr>
				<td bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Message ID</font></b></td>
				<td bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Raid(s)</font></b></td>
				<td bgcolor="#C0C0C0"><b><font face="Verdana" size="2">ENV</font></b></td>
                <td bgcolor="#C0C0C0"><b><font face="Verdana" size="2">SendBy</font></b></td>
                <td bgcolor="#C0C0C0"><b><font face="Verdana" size="2">SendDate</font></b></td>
				<td bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Status</font></b></td>
			</tr>
		<!--ReqList-->
		</table>
		<br><br>

		<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
		<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
		</body>
		]]>	
	</msg>
    <msg code="EDWEBS-00004" type="html">	
		<![CDATA[<body>
		<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
		<br><br>
		<font face="Tahoma" size="2" Color="#000079">Thanks for contact EDW Build Team, Your required to cancel your services <--ReqList--> which has been canceled!</font>
		<br><br>

		<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
		<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
		</body>
		]]>
	</msg>
    <msg code="EDWEBS-00005" type="html">
		<![CDATA[<body>
<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks for contact EDW Build Team, Your request has been performed, Here are details:</font>
<br><br>
<table border="1" width="100%" bordercolorlight="#000000" cellspacing="1" bordercolordark="#000000" style="border-collapse: collapse">
	<tr>
		<td colspan="2" bgcolor="#C0C0C0">
		<p align="center"><b><font face="Verdana" color="red" size="5">ERROR</font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Action</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2"><--act--></font></b></td>
	</tr>
	<tr>
		<td width="12%" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">ENV</font></b></td>
		<td width="87%"><b><font face="Verdana" size="2"><--ENV--></font></b></td>
	</tr>
	<tr>
		<td width="12%" height="23" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">ErrorCode</font></b></td>
		<td width="87%" height="23"><b><font face="Verdana" size="2"><--ErrorCode--></font></b></td>
	</tr>
	<tr>
		<td width="12%" height="23" bgcolor="#C0C0C0"><b><font face="Verdana" size="2">Description</font></b></td>
		<td width="87%" height="23"><b><font face="Verdana" color="red" size="2"><--Action--></font></b></td>
	</tr>
</table>
<br><br>
<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
</body>
]]>
	</msg>    
    <msg code="EDWEBS-10000" type="html">
	<![CDATA[<body>
	<font face="Tahoma" size="2" Color="#000079">Hi <--From--></font>
	<br><br>
	<font face="Tahoma" size="2" Color="#000079">Thanks for contact EDW Build Team, Your service number is <b><--msgid--></b> and request is in processing ...,<br><br>
	Your bundle folder will be created/shared here: <a href="https://esfvmvi-003:8123/<--computename-->/<--BundleName-->">YourBundleRootDir</a>
	you can find the bundle's status by checking logs there.<br><br>

	Bundle creation log always saved at : <a href="https://esfvmvi-003:8123/<--computename-->/StageLogs/CBundle<--BundleName-->.txt">YourBundleCreationLog</a><br><br>
	
	<b>Contact EDW build team if URL's are not accessible!</b>

	</font>
	<br><br>

	<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
	<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
	</body>]]>
	</msg>
    <msg code="EDWEBS-99998" type="html">
	<![CDATA[<body>
	<br><br>
	<font face="Tahoma" size="2" Color="#000079">Looks like Bob is down for some reason,<br><br>
	Bob started at: <--uptime--><br>
	    Downed  at: <--downtime--><br>
	<font color="red"><b>Last error message : <--lasterr--><b></font><br>
	</font>
	<br><br>
		Remote restart Bob with:<br>
		sc \\<--computename--> stop AutomatedBuildApp<br>
		sc \\<--computename--> start AutomatedBuildApp<br>
		sc \\<--computename--> query AutomatedBuildApp<br>
	<font face="Tahoma" size="2" Color="#000079">Thanks,</font><br>
	<font face="Tahoma" size="2" Color="#000079">EDW Build Team</font><br>
	</body>]]>
	</msg>	
  </Messages>
</EDWEBS>
